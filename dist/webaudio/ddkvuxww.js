/*! Built with http://stenciljs.com */
webaudio.loadComponents("ddkvuxww",function(e,t,n,r,i){var s=function(){return function(e,t,n){this.loadBuffer=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer";var r=this;n.onload=function(){r.context.decodeAudioData(n.response,function(n){n?(r.bufferList[t]=n,++r.loadCount==r.urlList.length&&r.onload(r.bufferList)):alert("error decoding file data: "+e)},function(e){console.error("decodeAudioData error",e)})},n.onerror=function(){alert("BufferLoader: XHR error")},n.send()},this.load=function(){for(var e=0;e<this.urlList.length;++e)this.loadBuffer(this.urlList[e],e)},this.context=e,this.urlList=t,this.onload=n,this.bufferList=new Array,this.loadCount=0}}(),a=function(e,t,n){for(var r=0;r<e.length;r++)t.call(n,r,e[r])},o=function(e,t){if(!e)throw t||"Assertion failed!";return e},u=function(e){return new Promise(function(t){return setTimeout(t,e)})},h="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},c=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e){!function(t){"use strict";function n(){if(n.prototype._singleton)throw new Error("WebMidi is a singleton, it cannot be instantiated directly.");n.prototype._singleton=this,this._inputs=[],this._outputs=[],this._userHandlers={},this._stateChangeQueue=[],this._processingStateChange=!1,this._midiInterfaceEvents=["connected","disconnected"],this._notes=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],this._semitones={C:0,D:2,E:4,F:5,G:7,A:9,B:11},Object.defineProperties(this,{MIDI_SYSTEM_MESSAGES:{value:{sysex:240,timecode:241,songposition:242,songselect:243,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,unknownsystemmessage:-1},writable:!1,enumerable:!0,configurable:!1},MIDI_CHANNEL_MESSAGES:{value:{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,channelmode:11,programchange:12,channelaftertouch:13,pitchbend:14},writable:!1,enumerable:!0,configurable:!1},MIDI_REGISTERED_PARAMETER:{value:{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]},writable:!1,enumerable:!0,configurable:!1},MIDI_CONTROL_CHANGE_MESSAGES:{value:{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101},writable:!1,enumerable:!0,configurable:!1},MIDI_CHANNEL_MODE_MESSAGES:{value:{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127},writable:!1,enumerable:!0,configurable:!1}}),Object.defineProperties(this,{supported:{enumerable:!0,get:function(){return"requestMIDIAccess"in navigator}},enabled:{enumerable:!0,get:function(){return void 0!==this.interface}.bind(this)},inputs:{enumerable:!0,get:function(){return this._inputs}.bind(this)},outputs:{enumerable:!0,get:function(){return this._outputs}.bind(this)},sysexEnabled:{enumerable:!0,get:function(){return!(!this.interface||!this.interface.sysexEnabled)}.bind(this)},time:{enumerable:!0,get:function(){return performance.now()}}})}function r(e){var t=this;this._userHandlers={channel:{},system:{}},this._midiInput=e,Object.defineProperties(this,{connection:{enumerable:!0,get:function(){return t._midiInput.connection}},id:{enumerable:!0,get:function(){return t._midiInput.id}},manufacturer:{enumerable:!0,get:function(){return t._midiInput.manufacturer}},name:{enumerable:!0,get:function(){return t._midiInput.name}},state:{enumerable:!0,get:function(){return t._midiInput.state}}}),this._initializeUserHandlers()}function i(e){var t=this;this._midiOutput=e,Object.defineProperties(this,{connection:{enumerable:!0,get:function(){return t._midiOutput.connection}},id:{enumerable:!0,get:function(){return t._midiOutput.id}},manufacturer:{enumerable:!0,get:function(){return t._midiOutput.manufacturer}},name:{enumerable:!0,get:function(){return t._midiOutput.name}},state:{enumerable:!0,get:function(){return t._midiOutput.state}}})}var s=new n;n.prototype.enable=function(e,t){return this.enabled?void 0:this.supported?void navigator.requestMIDIAccess({sysex:t}).then(function(t){this.interface=t,this._resetInterfaceUserHandlers(),this.interface.onstatechange=this._onInterfaceStateChange.bind(this),this._onInterfaceStateChange(null),"function"==typeof e&&e.call(this)}.bind(this),function(t){"function"==typeof e&&e.call(this,t)}.bind(this)):void("function"==typeof e&&e(new Error("The Web MIDI API is not supported by your browser.")))},n.prototype.disable=function(){if(!this.supported)throw new Error("The Web MIDI API is not supported by your browser.");this.interface.onstatechange=void 0,this.interface=void 0,this._inputs=[],this._outputs=[],this._resetInterfaceUserHandlers()},n.prototype.addListener=function(e,t){if(!this.enabled)throw new Error("WebMidi must be enabled before adding event listeners.");if("function"!=typeof t)throw new TypeError("The 'listener' parameter must be a function.");if(!(this._midiInterfaceEvents.indexOf(e)>=0))throw new TypeError("The specified event type is not supported.");return this._userHandlers[e].push(t),this},n.prototype.hasListener=function(e,t){if(!this.enabled)throw new Error("WebMidi must be enabled before checking event listeners.");if("function"!=typeof t)throw new TypeError("The 'listener' parameter must be a function.");if(!(this._midiInterfaceEvents.indexOf(e)>=0))throw new TypeError("The specified event type is not supported.");for(var n=0;n<this._userHandlers[e].length;n++)if(this._userHandlers[e][n]===t)return!0;return!1},n.prototype.removeListener=function(e,t){if(!this.enabled)throw new Error("WebMidi must be enabled before removing event listeners.");if(void 0!==t&&"function"!=typeof t)throw new TypeError("The 'listener' parameter must be a function.");if(this._midiInterfaceEvents.indexOf(e)>=0)if(t)for(var n=0;n<this._userHandlers[e].length;n++)this._userHandlers[e][n]===t&&this._userHandlers[e].splice(n,1);else this._userHandlers[e]=[];else{if(void 0!==e)throw new TypeError("The specified event type is not supported.");this._resetInterfaceUserHandlers()}return this},n.prototype.getInputById=function(e){if(!this.enabled)throw new Error("WebMidi is not enabled.");for(var t=0;t<this.inputs.length;t++)if(this.inputs[t].id===e)return this.inputs[t];return!1},n.prototype.getOutputById=function(e){if(!this.enabled)throw new Error("WebMidi is not enabled.");for(var t=0;t<this.outputs.length;t++)if(this.outputs[t].id===e)return this.outputs[t];return!1},n.prototype.getInputByName=function(e){if(!this.enabled)throw new Error("WebMidi is not enabled.");for(var t=0;t<this.inputs.length;t++)if(~this.inputs[t].name.indexOf(e))return this.inputs[t];return!1},n.prototype.getOctave=function(e){return e>=0&&127>=e?Math.floor(parseInt(e)/12-1)-1:void 0},n.prototype.getOutputByName=function(e){if(!this.enabled)throw new Error("WebMidi is not enabled.");for(var t=0;t<this.outputs.length;t++)if(~this.outputs[t].name.indexOf(e))return this.outputs[t];return!1},n.prototype.guessNoteNumber=function(e){var t=!1;if(e&&e.toFixed&&e>=0&&127>=e?t=Math.round(e):parseInt(e)>=0&&parseInt(e)<=127?t=parseInt(e):("string"==typeof e||e instanceof String)&&(t=this.noteNameToNumber(e)),!1===t)throw new Error("Invalid note number ("+e+").");return t},n.prototype.noteNameToNumber=function(e){"string"!=typeof e&&(e="");var t=e.match(/([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)/i);if(!t)throw new RangeError("Invalid note name.");var n=s._semitones[t[1].toUpperCase()],r=parseInt(t[3]),i=12*(r+2)+n;if(t[2].toLowerCase().indexOf("b")>-1?i-=t[2].length:t[2].toLowerCase().indexOf("#")>-1&&(i+=t[2].length),0>n||-2>r||r>8||0>i||i>127)throw new RangeError("Invalid note name or note outside valid range.");return i},n.prototype._updateInputsAndOutputs=function(){this._updateInputs(),this._updateOutputs()},n.prototype._updateInputs=function(){for(var e=0;e<this._inputs.length;e++){for(var t=!0,n=this.interface.inputs.values(),r=n.next();r&&!r.done;r=n.next())if(this._inputs[e]._midiInput===r.value){t=!1;break}t&&this._inputs.splice(e,1)}this.interface.inputs.forEach(function(e){for(var t=!0,n=0;n<this._inputs.length;n++)this._inputs[n]._midiInput===e&&(t=!1);t&&this._inputs.push(this._createInput(e))}.bind(this))},n.prototype._updateOutputs=function(){for(var e=0;e<this._outputs.length;e++){for(var t=!0,n=this.interface.outputs.values(),r=n.next();r&&!r.done;r=n.next())if(this._outputs[e]._midiOutput===r.value){t=!1;break}t&&this._outputs.splice(e,1)}this.interface.outputs.forEach(function(e){for(var t=!0,n=0;n<this._outputs.length;n++)this._outputs[n]._midiOutput===e&&(t=!1);t&&this._outputs.push(this._createOutput(e))}.bind(this))},n.prototype._createInput=function(e){var t=new r(e);return t._midiInput.onmidimessage=t._onMidiMessage.bind(t),t},n.prototype._createOutput=function(e){var t=new i(e);return t._midiOutput.onmidimessage=t._onMidiMessage.bind(t),t},n.prototype._onInterfaceStateChange=function(e){if(this._stateChangeQueue.push(e),!this._processingStateChange){for(this._processingStateChange=!0;this._stateChangeQueue.length>0;)this._processStateChange(this._stateChangeQueue.shift());this._processingStateChange=!1}},n.prototype._processStateChange=function(e){if(this._updateInputsAndOutputs(),null!==e){var t={timestamp:e.timeStamp,type:e.port.state,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name};"connected"===e.port.state&&("output"===e.port.type?t.output=this.getOutputById(e.port.id):"input"===e.port.type&&(t.input=this.getInputById(e.port.id))),this._userHandlers[e.port.state].forEach(function(e){e(t)})}},n.prototype._resetInterfaceUserHandlers=function(){for(var e=0;e<this._midiInterfaceEvents.length;e++)this._userHandlers[this._midiInterfaceEvents[e]]=[]},r.prototype.addListener=function(e,t,n){var r=this;if(void 0===t&&(t="all"),Array.isArray(t)||(t=[t]),t.forEach(function(e){if("all"!==e&&!(e>=1&&16>=e))throw new RangeError("The 'channel' parameter is invalid.")}),"function"!=typeof n)throw new TypeError("The 'listener' parameter must be a function.");if(s.MIDI_SYSTEM_MESSAGES[e])this._userHandlers.system[e]||(this._userHandlers.system[e]=[]),this._userHandlers.system[e].push(n);else{if(!s.MIDI_CHANNEL_MESSAGES[e])throw new TypeError("The specified event type is not supported.");if(t.indexOf("all")>-1){t=[];for(var i=1;16>=i;i++)t.push(i)}this._userHandlers.channel[e]||(this._userHandlers.channel[e]=[]),t.forEach(function(t){r._userHandlers.channel[e][t]||(r._userHandlers.channel[e][t]=[]),r._userHandlers.channel[e][t].push(n)})}return this},r.prototype.on=r.prototype.addListener,r.prototype.hasListener=function(e,t,n){var r=this;if("function"!=typeof n)throw new TypeError("The 'listener' parameter must be a function.");if(void 0===t&&(t="all"),t.constructor!==Array&&(t=[t]),s.MIDI_SYSTEM_MESSAGES[e]){for(var i=0;i<this._userHandlers.system[e].length;i++)if(this._userHandlers.system[e][i]===n)return!0}else if(s.MIDI_CHANNEL_MESSAGES[e]){if(t.indexOf("all")>-1){t=[];for(var a=1;16>=a;a++)t.push(a)}return!!this._userHandlers.channel[e]&&t.every(function(t){var i=r._userHandlers.channel[e][t];return i&&i.indexOf(n)>-1})}return!1},r.prototype.removeListener=function(e,t,n){var r=this;if(void 0!==n&&"function"!=typeof n)throw new TypeError("The 'listener' parameter must be a function.");if(void 0===t&&(t="all"),t.constructor!==Array&&(t=[t]),s.MIDI_SYSTEM_MESSAGES[e])if(void 0===n)this._userHandlers.system[e]=[];else for(var i=0;i<this._userHandlers.system[e].length;i++)this._userHandlers.system[e][i]===n&&this._userHandlers.system[e].splice(i,1);else if(s.MIDI_CHANNEL_MESSAGES[e]){if(t.indexOf("all")>-1){t=[];for(var a=1;16>=a;a++)t.push(a)}if(!this._userHandlers.channel[e])return this;t.forEach(function(t){var i=r._userHandlers.channel[e][t];if(i)if(void 0===n)r._userHandlers.channel[e][t]=[];else for(var s=0;s<i.length;s++)i[s]===n&&i.splice(s,1)})}else{if(void 0!==e)throw new TypeError("The specified event type is not supported.");this._initializeUserHandlers()}return this},r.prototype._initializeUserHandlers=function(){for(var e in s.MIDI_CHANNEL_MESSAGES)s.MIDI_CHANNEL_MESSAGES.hasOwnProperty(e)&&(this._userHandlers.channel[e]={});for(var t in s.MIDI_SYSTEM_MESSAGES)s.MIDI_SYSTEM_MESSAGES.hasOwnProperty(t)&&(this._userHandlers.system[t]=[])},r.prototype._onMidiMessage=function(e){e.data[0]<240?this._parseChannelEvent(e):e.data[0]<=255&&this._parseSystemEvent(e)},r.prototype._parseChannelEvent=function(e){var t,n,r=e.data[0]>>4,i=1+(15&e.data[0]);e.data.length>1&&(t=e.data[1],n=e.data.length>2?e.data[2]:void 0);var a={target:this,data:e.data,timestamp:e.timeStamp,channel:i};r===s.MIDI_CHANNEL_MESSAGES.noteoff||r===s.MIDI_CHANNEL_MESSAGES.noteon&&0===n?(a.type="noteoff",a.note={number:t,name:s._notes[t%12],octave:s.getOctave(t)},a.velocity=n/127,a.rawVelocity=n):r===s.MIDI_CHANNEL_MESSAGES.noteon?(a.type="noteon",a.note={number:t,name:s._notes[t%12],octave:s.getOctave(t)},a.velocity=n/127,a.rawVelocity=n):r===s.MIDI_CHANNEL_MESSAGES.keyaftertouch?(a.type="keyaftertouch",a.note={number:t,name:s._notes[t%12],octave:s.getOctave(t)},a.value=n/127):r===s.MIDI_CHANNEL_MESSAGES.controlchange&&t>=0&&119>=t?(a.type="controlchange",a.controller={number:t,name:this.getCcNameByNumber(t)},a.value=n):r===s.MIDI_CHANNEL_MESSAGES.channelmode&&t>=120&&127>=t?(a.type="channelmode",a.controller={number:t,name:this.getChannelModeByNumber(t)},a.value=n):r===s.MIDI_CHANNEL_MESSAGES.programchange?(a.type="programchange",a.value=t):r===s.MIDI_CHANNEL_MESSAGES.channelaftertouch?(a.type="channelaftertouch",a.value=t/127):r===s.MIDI_CHANNEL_MESSAGES.pitchbend?(a.type="pitchbend",a.value=((n<<7)+t-8192)/8192):a.type="unknownchannelmessage",this._userHandlers.channel[a.type]&&this._userHandlers.channel[a.type][i]&&this._userHandlers.channel[a.type][i].forEach(function(e){e(a)})},r.prototype.getCcNameByNumber=function(e){if(!((e=parseInt(e))>=0&&119>=e))throw new RangeError("The control change number must be between 0 and 119.");for(var t in s.MIDI_CONTROL_CHANGE_MESSAGES)if(e===s.MIDI_CONTROL_CHANGE_MESSAGES[t])return t},r.prototype.getChannelModeByNumber=function(e){if(!((e=parseInt(e))>=120&&status<=127))throw new RangeError("The control change number must be between 120 and 127.");for(var t in s.MIDI_CHANNEL_MODE_MESSAGES)if(e===s.MIDI_CHANNEL_MODE_MESSAGES[t])return t},r.prototype._parseSystemEvent=function(e){var t=e.data[0],n={target:this,data:e.data,timestamp:e.timeStamp};t===s.MIDI_SYSTEM_MESSAGES.sysex?n.type="sysex":t===s.MIDI_SYSTEM_MESSAGES.timecode?n.type="timecode":t===s.MIDI_SYSTEM_MESSAGES.songposition?n.type="songposition":t===s.MIDI_SYSTEM_MESSAGES.songselect?(n.type="songselect",n.song=e.data[1]):t===s.MIDI_SYSTEM_MESSAGES.tuningrequest?n.type="tuningrequest":t===s.MIDI_SYSTEM_MESSAGES.clock?n.type="clock":t===s.MIDI_SYSTEM_MESSAGES.start?n.type="start":t===s.MIDI_SYSTEM_MESSAGES.continue?n.type="continue":t===s.MIDI_SYSTEM_MESSAGES.stop?n.type="stop":t===s.MIDI_SYSTEM_MESSAGES.activesensing?n.type="activesensing":t===s.MIDI_SYSTEM_MESSAGES.reset?n.type="reset":n.type="unknownsystemmessage",this._userHandlers.system[n.type]&&this._userHandlers.system[n.type].forEach(function(e){e(n)})},i.prototype.send=function(e,t,n){if(!(e>=128&&255>=e))throw new RangeError("The status byte must be an integer between 128 (0x80) and 255 (0xFF).");Array.isArray(t)||(t=parseInt(t)>=0&&parseInt(t)<=127?[parseInt(t)]:[]);var r=[e];return t.forEach(function(e){if(!(e>=0&&255>=e))throw new RangeError("The data bytes must be integers between 0 (0x00) and 255 (0xFF).");r.push(e)}),this._midiOutput.send(r,parseFloat(n)||0),this},i.prototype.sendSysex=function(e,t,n){if(!s.sysexEnabled)throw new Error("SysEx message support must first be activated.");return n=n||{},e=[].concat(e),t.forEach(function(e){if(0>e||e>127)throw new RangeError("The data bytes of a SysEx message must be integers between 0 (0x00) and 127 (0x7F).")}),t=e.concat(t,s.MIDI_SYSTEM_MESSAGES.sysexend),this.send(s.MIDI_SYSTEM_MESSAGES.sysex,t,this._parseTimeParameter(n.time)),this},i.prototype.sendTimecodeQuarterFrame=function(e,t){return t=t||{},this.send(s.MIDI_SYSTEM_MESSAGES.timecode,e,this._parseTimeParameter(t.time)),this},i.prototype.sendSongPosition=function(e,t){e=parseInt(e)||0,t=t||{};var n=e>>7&127,r=127&e;return this.send(s.MIDI_SYSTEM_MESSAGES.songposition,[n,r],this._parseTimeParameter(t.time)),this},i.prototype.sendSongSelect=function(e,t){if(e=parseInt(e),t=t||{},!(e>=0&&127>=e))throw new RangeError("The song number must be between 0 and 127.");return this.send(s.MIDI_SYSTEM_MESSAGES.songselect,[e],this._parseTimeParameter(t.time)),this},i.prototype.sendTuningRequest=function(e){return e=e||{},this.send(s.MIDI_SYSTEM_MESSAGES.tuningrequest,void 0,this._parseTimeParameter(e.time)),this},i.prototype.sendClock=function(e){return e=e||{},this.send(s.MIDI_SYSTEM_MESSAGES.clock,void 0,this._parseTimeParameter(e.time)),this},i.prototype.sendStart=function(e){return e=e||{},this.send(s.MIDI_SYSTEM_MESSAGES.start,void 0,this._parseTimeParameter(e.time)),this},i.prototype.sendContinue=function(e){return e=e||{},this.send(s.MIDI_SYSTEM_MESSAGES.continue,void 0,this._parseTimeParameter(e.time)),this},i.prototype.sendStop=function(e){return e=e||{},this.send(s.MIDI_SYSTEM_MESSAGES.stop,void 0,this._parseTimeParameter(e.time)),this},i.prototype.sendActiveSensing=function(e){return e=e||{},this.send(s.MIDI_SYSTEM_MESSAGES.activesensing,void 0,this._parseTimeParameter(e.time)),this},i.prototype.sendReset=function(e){return e=e||{},this.send(s.MIDI_SYSTEM_MESSAGES.reset,void 0,this._parseTimeParameter(e.time)),this},i.prototype.stopNote=function(e,t,n){if("all"===e)return this.sendChannelMode("allnotesoff",0,t,n);var r=64;return n=n||{},n.velocity=parseFloat(n.velocity),n.rawVelocity?!isNaN(n.velocity)&&n.velocity>=0&&n.velocity<=127&&(r=n.velocity):!isNaN(n.velocity)&&n.velocity>=0&&n.velocity<=1&&(r=127*n.velocity),this._convertNoteToArray(e).forEach(function(e){this._convertChannelToArray(t).forEach(function(t){this.send((s.MIDI_CHANNEL_MESSAGES.noteoff<<4)+(t-1),[e,Math.round(r)],this._parseTimeParameter(n.time))}.bind(this))}.bind(this)),this},i.prototype.playNote=function(e,t,n){var r=64;if(n=n||{},n.velocity=parseFloat(n.velocity),n.rawVelocity?!isNaN(n.velocity)&&n.velocity>=0&&n.velocity<=127&&(r=n.velocity):!isNaN(n.velocity)&&n.velocity>=0&&n.velocity<=1&&(r=127*n.velocity),n.time=this._parseTimeParameter(n.time),this._convertNoteToArray(e).forEach(function(e){this._convertChannelToArray(t).forEach(function(t){this.send((s.MIDI_CHANNEL_MESSAGES.noteon<<4)+(t-1),[e,Math.round(r)],n.time)}.bind(this))}.bind(this)),n.duration=parseFloat(n.duration),n.duration){n.duration<=0&&(n.duration=0);var i=64;n.release=parseFloat(n.release),n.rawVelocity?!isNaN(n.release)&&n.release>=0&&n.release<=127&&(i=n.release):!isNaN(n.release)&&n.release>=0&&n.release<=1&&(i=127*n.release),this._convertNoteToArray(e).forEach(function(e){this._convertChannelToArray(t).forEach(function(t){this.send((s.MIDI_CHANNEL_MESSAGES.noteoff<<4)+(t-1),[e,Math.round(i)],(n.time||s.time)+n.duration)}.bind(this))}.bind(this))}return this},i.prototype.sendKeyAftertouch=function(e,t,n,r){var i=this;if(r=r||{},1>t||t>16)throw new RangeError("The channel must be between 1 and 16.");n=parseFloat(n),(isNaN(n)||0>n||n>1)&&(n=.5);var a=Math.round(127*n);return this._convertNoteToArray(e).forEach(function(e){i._convertChannelToArray(t).forEach(function(t){i.send((s.MIDI_CHANNEL_MESSAGES.keyaftertouch<<4)+(t-1),[e,a],i._parseTimeParameter(r.time))})}),this},i.prototype.sendControlChange=function(e,t,n,r){if(r=r||{},"string"==typeof e){if(!(e=s.MIDI_CONTROL_CHANGE_MESSAGES[e]))throw new TypeError("Invalid controller name.")}else if(!((e=parseInt(e))>=0&&119>=e))throw new RangeError("Controller numbers must be between 0 and 119.");if(!((t=parseInt(t)||0)>=0&&127>=t))throw new RangeError("Controller value must be between 0 and 127.");return this._convertChannelToArray(n).forEach(function(n){this.send((s.MIDI_CHANNEL_MESSAGES.controlchange<<4)+(n-1),[e,t],this._parseTimeParameter(r.time))}.bind(this)),this},i.prototype._selectRegisteredParameter=function(e,t,n){var r=this;if(e[0]=parseInt(e[0]),!(e[0]>=0&&e[0]<=127))throw new RangeError("The control65 value must be between 0 and 127");if(e[1]=parseInt(e[1]),!(e[1]>=0&&e[1]<=127))throw new RangeError("The control64 value must be between 0 and 127");return this._convertChannelToArray(t).forEach(function(i){r.sendControlChange(101,e[0],t,{time:n}),r.sendControlChange(100,e[1],t,{time:n})}),this},i.prototype._selectNonRegisteredParameter=function(e,t,n){var r=this;if(e[0]=parseInt(e[0]),!(e[0]>=0&&e[0]<=127))throw new RangeError("The control63 value must be between 0 and 127");if(e[1]=parseInt(e[1]),!(e[1]>=0&&e[1]<=127))throw new RangeError("The control62 value must be between 0 and 127");return this._convertChannelToArray(t).forEach(function(i){r.sendControlChange(99,e[0],t,{time:n}),r.sendControlChange(98,e[1],t,{time:n})}),this},i.prototype._setCurrentRegisteredParameter=function(e,t,n){var r=this;if(e=[].concat(e),e[0]=parseInt(e[0]),!(e[0]>=0&&e[0]<=127))throw new RangeError("The msb value must be between 0 and 127");return this._convertChannelToArray(t).forEach(function(i){r.sendControlChange(6,e[0],t,{time:n})}),e[1]=parseInt(e[1]),e[1]>=0&&e[1]<=127&&this._convertChannelToArray(t).forEach(function(i){r.sendControlChange(38,e[1],t,{time:n})}),this},i.prototype._deselectRegisteredParameter=function(e,t){var n=this;return this._convertChannelToArray(e).forEach(function(r){n.sendControlChange(101,127,e,{time:t}),n.sendControlChange(100,127,e,{time:t})}),this},i.prototype.setRegisteredParameter=function(e,t,n,r){var i=this;if(r=r||{},!Array.isArray(e)){if(!s.MIDI_REGISTERED_PARAMETER[e])throw new Error("The specified parameter is not available.");e=s.MIDI_REGISTERED_PARAMETER[e]}return this._convertChannelToArray(n).forEach(function(s){i._selectRegisteredParameter(e,n,r.time),i._setCurrentRegisteredParameter(t,n,r.time),i._deselectRegisteredParameter(n,r.time)}),this},i.prototype.setNonRegisteredParameter=function(e,t,n,r){var i=this;if(r=r||{},!(e[0]>=0&&e[0]<=127&&e[1]>=0&&e[1]<=127))throw new Error("Position 0 and 1 of the 2-position parameter array must both be between 0 and 127.");return t=[].concat(t),this._convertChannelToArray(n).forEach(function(s){i._selectNonRegisteredParameter(e,n,r.time),i._setCurrentRegisteredParameter(t,n,r.time),i._deselectRegisteredParameter(n,r.time)}),this},i.prototype.incrementRegisteredParameter=function(e,t,n){var r=this;if(n=n||{},!Array.isArray(e)){if(!s.MIDI_REGISTERED_PARAMETER[e])throw new Error("The specified parameter is not available.");e=s.MIDI_REGISTERED_PARAMETER[e]}return this._convertChannelToArray(t).forEach(function(i){r._selectRegisteredParameter(e,t,n.time),r.sendControlChange(96,0,t,{time:n.time}),r._deselectRegisteredParameter(t,n.time)}),this},i.prototype.decrementRegisteredParameter=function(e,t,n){if(n=n||{},!Array.isArray(e)){if(!s.MIDI_REGISTERED_PARAMETER[e])throw new TypeError("The specified parameter is not available.");e=s.MIDI_REGISTERED_PARAMETER[e]}return this._convertChannelToArray(t).forEach(function(r){this._selectRegisteredParameter(e,t,n.time),this.sendControlChange(97,0,t,{time:n.time}),this._deselectRegisteredParameter(t,n.time)}.bind(this)),this},i.prototype.setPitchBendRange=function(e,t,n,r){var i=this;if(r=r||{},!((e=parseInt(e)||0)>=0&&127>=e))throw new RangeError("The semitones value must be between 0 and 127");if(!((t=parseInt(t)||0)>=0&&127>=t))throw new RangeError("The cents value must be between 0 and 127");return this._convertChannelToArray(n).forEach(function(s){i.setRegisteredParameter("pitchbendrange",[e,t],n,{time:r.time})}),this},i.prototype.setModulationRange=function(e,t,n,r){var i=this;if(r=r||{},!((e=parseInt(e)||0)>=0&&127>=e))throw new RangeError("The semitones value must be between 0 and 127");if(!((t=parseInt(t)||0)>=0&&127>=t))throw new RangeError("The cents value must be between 0 and 127");return this._convertChannelToArray(n).forEach(function(s){i.setRegisteredParameter("modulationrange",[e,t],n,{time:r.time})}),this},i.prototype.setMasterTuning=function(e,t,n){var r=this;if(n=n||{},-65>=(e=parseFloat(e)||0)||e>=64)throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");var i=parseInt(e)+64,s=e-parseInt(e),a=(s=Math.round((s+1)/2*16383))>>7&127,o=127&s;return this._convertChannelToArray(t).forEach(function(e){r.setRegisteredParameter("channelcoarsetuning",i,t,{time:n.time}),r.setRegisteredParameter("channelfinetuning",[a,o],t,{time:n.time})}),this},i.prototype.setTuningProgram=function(e,t,n){var r=this;if(n=n||{},!((e=parseInt(e)||0)>=0&&127>=e))throw new RangeError("The program value must be between 0 and 127");return this._convertChannelToArray(t).forEach(function(i){r.setRegisteredParameter("tuningprogram",e,t,{time:n.time})}),this},i.prototype.setTuningBank=function(e,t,n){var r=this;if(n=n||{},!((e=parseInt(e)||0)>=0&&127>=e))throw new RangeError("The bank value must be between 0 and 127");return this._convertChannelToArray(t).forEach(function(i){r.setRegisteredParameter("tuningbank",e,t,{time:n.time})}),this},i.prototype.sendChannelMode=function(e,t,n,r){if(r=r||{},"string"==typeof e){if(!(e=s.MIDI_CHANNEL_MODE_MESSAGES[e]))throw new TypeError("Invalid channel mode message name.")}else if(!((e=parseInt(e))>=120&&127>=e))throw new RangeError("Channel mode numerical identifiers must be between 120 and 127.");if(0>(t=parseInt(t)||0)||t>127)throw new RangeError("Value must be an integer between 0 and 127.");return this._convertChannelToArray(n).forEach(function(n){this.send((s.MIDI_CHANNEL_MESSAGES.channelmode<<4)+(n-1),[e,t],this._parseTimeParameter(r.time))}.bind(this)),this},i.prototype.sendProgramChange=function(e,t,n){var r=this;if(n=n||{},e=parseInt(e),isNaN(e)||0>e||e>127)throw new RangeError("Program numbers must be between 0 and 127.");return this._convertChannelToArray(t).forEach(function(t){r.send((s.MIDI_CHANNEL_MESSAGES.programchange<<4)+(t-1),[e],r._parseTimeParameter(n.time))}),this},i.prototype.sendChannelAftertouch=function(e,t,n){var r=this;n=n||{},e=parseFloat(e),(isNaN(e)||0>e||e>1)&&(e=.5);var i=Math.round(127*e);return this._convertChannelToArray(t).forEach(function(e){r.send((s.MIDI_CHANNEL_MESSAGES.channelaftertouch<<4)+(e-1),[i],r._parseTimeParameter(n.time))}),this},i.prototype.sendPitchBend=function(e,t,n){var r=this;if(n=n||{},e=parseFloat(e),isNaN(e)||-1>e||e>1)throw new RangeError("Pitch bend value must be between -1 and 1.");var i=Math.round((e+1)/2*16383),a=i>>7&127,o=127&i;return this._convertChannelToArray(t).forEach(function(e){r.send((s.MIDI_CHANNEL_MESSAGES.pitchbend<<4)+(e-1),[o,a],r._parseTimeParameter(n.time))}),this},i.prototype._parseTimeParameter=function(e){var t,n;return"string"==typeof e&&"+"===e.substring(0,1)?(t=parseFloat(e))&&t>0&&(n=s.time+t):(t=parseFloat(e))>s.time&&(n=t),n},i.prototype._convertNoteToArray=function(e){var t=[];return Array.isArray(e)||(e=[e]),e.forEach(function(e){t.push(s.guessNoteNumber(e))}),t},i.prototype._convertChannelToArray=function(e){if(("all"===e||void 0===e)&&(e=["all"]),Array.isArray(e)||(e=[e]),e.indexOf("all")>-1){e=[];for(var t=1;16>=t;t++)e.push(t)}return e.forEach(function(e){if(!(e>=1&&16>=e))throw new RangeError("MIDI channels must be between 1 and 16.")}),e},i.prototype._onMidiMessage=function(e){},e.exports?e.exports=s:t.WebMidi||(t.WebMidi=s)}(h)}),l=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function a(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,o)}u((r=r.apply(e,t||[])).next())})},f=function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,s&&(a=s[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(s,n[1])).done)return a;switch(s=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,s=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],s=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,s,a,o,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o},p=function(){function e(){this.name="web_audio",this.prepared=!1,this.midi=!1,this.sources=[],this.keys={}}return e.prototype.source=function(e){return this.sources[e]},e.prototype.is_prepared=function(){return this.prepared},e.prototype.componentDidLoad=function(){this.connect_context(),this.gain=this.context.createGain(),this.connect_visualizers(),this.connect_sources(),this.connect_debugger(),this.connect_midi()},e.prototype.connect_context=function(){var e=window.AudioContext||window.webkitAudioContext||window.audio_context;e?window.audio_context=new e:console.error("The Web Audio API is not supported by your browser. "),this.context=window.audio_context},e.prototype.connect_sources=function(){this.build_sources()},e.prototype.build_sources=function(){var e=this;this._sources=this.element.querySelectorAll("web-audio-source"),this.externalFiles=[],a(this._sources,function(t,n){e.sources[n.name]=n,new s(e.context,[n.src],function(t){e.cache_sources(t,n)}).load()},this)},e.prototype.cache_sources=function(e,t){return l(this,void 0,void 0,function(){var n=this;return f(this,function(r){switch(r.label){case 0:return[4,u(50)];case 1:return r.sent(),e.forEach(function(e){n.midi&&(n.keys[t.midikey]=t),n._currentSource=t,n._currentSource.assignBuffer(n,e)}),this._currentSource=null,this.prepared=!0,[2]}})})},e.prototype.connect_visualizers=function(){return l(this,void 0,void 0,function(){var e=this;return f(this,function(t){switch(t.label){case 0:return[4,u(50)];case 1:return t.sent(),this.visualizers=document.querySelectorAll('web-audio-visualizer[for="'+this.name+'"]'),this.visualizers?a(this.visualizers,function(t,n){n=0===t?n.connect(e.context,e.context.destination):n.connect(e.context,e.previousVisualizer.analyser),e.previousVisualizer=n},this):console.info("No visualizers bound to this web-audio instance"),this.visualizers.length>=1?this.gain.connect(this.previousVisualizer.analyser):this.gain.connect(this.context.destination),[2]}})})},e.prototype.connect_debugger=function(){console.log("connect_debugger")},e.prototype.connect_midi=function(){var e=this;this.midi&&c.enable(function(t){var n=c.inputs[0];n&&(n.addListener("noteon","all",function(t){e.keys[t.note.number]&&(e.keys[t.note.number].gain().value=t.data[2]/175,e.keys[t.note.number].play())}),n.addListener("pitchbend","all",function(e){console.log("Pitch value: "+e.value)}),n.addListener("controlchange","all",function(e){console.log("Received 'controlchange' message.",e)}))})},e}(),d=function(){return function(){}}(),m=function(e,t){var n=e.createBiquadFilter();return n.type=t.method,n.gain.value=1,_(n,t),n},y=function(e,t){var n=e.createDelay(5);return n.delayTime.value=3,_(n,t),n},E=function(e,t){var n=e.createConvolver(),r=t._use;return console.log(r),r.getBuffer()&&(n.buffer=r.getBuffer()),n},_=function(e,t){"mouse"===t.responds?S(e,t):e.frequency.value=t.value},v=function(e){var t,n,r;null==(e=e||window.event).pageX&&null!=e.clientX&&(n=(t=e.target&&e.target.ownerDocument||document).documentElement,r=t.body,e.pageX=e.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),e.pageY=e.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)),window.mousePos={toTop:e.pageY,toRight:window.innerWidth-e.pageX,toBottom:window.innerHeight-e.pageY,toLeft:e.pageX}},g=function(){if(window.mousePos){var e=new CustomEvent("mouse-update",{detail:window.mousePos});document.dispatchEvent(e)}},S=function(e,t){document.addEventListener("mouse-update",function(n){"x"===t.axis?e.frequency.value=1.5*n.detail.toLeft||1e3:"x-reverse"===t.axis?e.frequency.value=1.5*n.detail.toRight||1e3:"y"===t.axis?e.frequency.value=1.5*n.detail.toTop||1e3:"y-reverse"===t.axis?e.frequency.value=1.5*n.detail.toBottom||1e3:"bi"===t.axis?e.frequency.value=n.detail.toRight+n.detail.toTop||1e3:"bi-reverse"===t.axis&&(e.frequency.value=n.detail.toLeft+n.detail.toRight||1e3)},!1),window.mouseInitialized||(window.mouseInitialized=!0,document.onmousemove=v,setInterval(g,100))},b=function(){function e(){this.method="lowshelf",this.value=1,this.responds=null,this.axis="x"}return e.prototype.attachEffect=function(e,t){return this.context=e,this.source=t,this._use=t.webAudio().querySelector("web-audio-source[name="+this.use+"]"),o(this.type,'"'+this.type+'" is not a valid effect - Routing around to masterGain."')&&("panner"===this.type||"listener"===this.type||("reverb"===this.type?this.effect=E(this.context,this):"filter"===this.type?this.effect=m(this.context,this):"delay"===this.type?this.effect=y(this.context,this):"compression"===this.type||this.type)),this.effect},e.prototype.effects=function(){return["panner","listener","reverb","delay","compression","distortion","filter"]},e}(),T=function(){function e(){this.name="web_audio_sequencer",this.autoplay=!1,this.taps=4,this.context=function(){return window.audio_context},this.noteTime=0,this.currentTap=0,this.totalPlayTime=0,this.custom=function(){console.log("boop")}}return e.prototype.componentDidLoad=function(){this.autoplay&&this.play()},e.prototype.schedule=function(){var e=this,t=this.context().currentTime;for(t-=this.startTime;this.noteTime<t+.005;)this.totalPlayTime=this.noteTime+this.startTime,0===this.currentTap&&this.iterations++,this.custom(),this.advance();this.timer=setTimeout(function(){e.schedule()},0)},e.prototype.advance=function(){var e=60/this.tempo;this.currentTap++,this.currentTap==this.taps&&(this.currentTap=0),this.noteTime+=.25*e},e.prototype.play=function(){this.iterations=0,this.startTime=this.context().currentTime+.005||.005,this.schedule()},e.prototype.stop=function(){this.iterations=0,this.startTime=null,this.currentTap=0,clearTimeout(this.timer)},e}(),w=function(){function e(){this.inert=!1,this.midikey=0,this.midichannel=0,this.status="paused",this.effectsvolume=100,this.effects=[]}return e.prototype.getBuffer=function(){return this.buffer},e.prototype.webAudio=function(){return this.webAudioWrapper},e.prototype.gain=function(e){return void 0===e&&(e="wet"),"wet"===e?this.wetGain:"dry"===e?this.dryGain:"channel"===e?this.channelGain:void 0},e.prototype.play=function(){if(this.inert)throw"Cannot play inert media.";this.source=this.context.createBufferSource(),this.source.buffer=this.buffer,this.wetGain.gain.value=this.effectsvolume/100,this.dryGain.gain.value=Math.abs((this.effectsvolume-100)/100),this.source.connect(this.wetGain),this.source.connect(this.dryGain),this.source.start(0)},e.prototype.assignBuffer=function(e,t){var n=this;if(this.webAudioWrapper=e.element,this.context=e.context,this.buffer=t,!this.inert){if(this.masterGain=e.gain,this.channelGain=this.context.createGain(),this.prepareEffects(),Object.keys(this.effects).length>0){this.wetGain=this.context.createGain();var r="";Object.keys(this.effects).reverse().forEach(function(e,t){0===t?n.wetGain.connect(n.effects[e]):n.effects[r].connect(n.effects[e]),r=e}),this.effects[r].connect(this.channelGain)}this.dryGain=this.context.createGain(),this.dryGain.connect(this.channelGain),this.channelGain.connect(this.masterGain)}},e.prototype.prepareEffects=function(){if("WEB-AUDIO"!==this.element.parentElement.nodeName)for(var e=this.element.parentElement;"WEB-AUDIO"!==e.nodeName;)this.effects[e.getAttribute("name")]=e.attachEffect(this.context,this.element),e=e.parentElement},e}(),I=function(){function e(){this.for="web_audio",this.type="wave",this.smoothing=.9,this.size=1024,this.width=800,this.height=800}return e.prototype.componentDidLoad=function(){this.canvas=this.element.querySelector("canvas")},e.prototype.connect=function(e,t){return this.context=e,this.analyser=this.context.createAnalyser(),this.analyser.connect(t),this.freqs=new Uint8Array(this.analyser.frequencyBinCount),this.times=new Uint8Array(this.analyser.frequencyBinCount),"webgl"===this.type?(this.canvasCTX=this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl"),this.__prepareWebGL()):this.canvasCTX=this.canvas.getContext("2d"),requestAnimationFrame(this.draw.bind(this)),this},e.prototype.draw=function(){if(this.analyser.smoothingTimeConstant=this.smoothing,this.analyser.fftSize=this.size,this.analyser.getByteFrequencyData(this.freqs),this.analyser.getByteTimeDomainData(this.times),"webgl"!==this.type){var e=Math.floor(this.freqs.length);this.canvas.width=e||this.width,this.canvas.height=this.height}switch(this.type){case"wave":this.wave();break;case"bars":this.bars();break;case"webgl":this.webgl()}requestAnimationFrame(this.draw.bind(this))},e.prototype.wave=function(){this.canvasCTX.fillRect(0,0,2*this.width,this.height);for(var e=0;e<this.analyser.frequencyBinCount;e++){var t=this.times[e]/256,n=this.height*t,r=this.height-n,i=this.width/this.analyser.frequencyBinCount+4,s=e/this.analyser.frequencyBinCount*360;this.canvasCTX.fillStyle="hsl("+s+", 100%, 50%)",this.canvasCTX.fillRect(e*i,r,4,4)}},e.prototype.bars=function(){for(var e=0;e<this.analyser.frequencyBinCount;e++){var t=this.freqs[e]/256,n=this.height*t,r=this.height-n,i=this.width/this.analyser.frequencyBinCount+1,s=e/this.analyser.frequencyBinCount*360;this.canvasCTX.fillStyle="hsl("+s+", 100%, 50%)",this.canvasCTX.fillRect(e*i,r,i,n)}},e.prototype.webgl=function(){this.canvasCTX.uniform1f(this.fragTime,this.context.currentTime),this.canvasCTX.fillStyle="black",this.__copyAudioDataToTexture(),this.__renderQuad()},e.prototype.getFrequencyValue=function(e){var t=this.context.sampleRate/2,n=Math.round(e/t*this.freqs.length);return this.freqs[n]},e.prototype.render=function(){return t("canvas",{a:{id:"canvas"}})},e.prototype.__prepareWebGL=function(){var e=this.canvasCTX.createBuffer();this.canvasCTX.bindBuffer(this.canvasCTX.ARRAY_BUFFER,e);var t=new Float32Array([-1,-1,1,-1,-1,1,1,1]);this.canvasCTX.bufferData(this.canvasCTX.ARRAY_BUFFER,t,this.canvasCTX.STATIC_DRAW),this.canvasCTX.vertexAttribPointer(0,2,this.canvasCTX.FLOAT,!1,0,0);var n=this.element.querySelector('web-audio-visualizer-shader[type="vertex"]');this.vertex=n.innerText;var r=this.element.querySelector('web-audio-visualizer-shader[type="fragment"]');this.fragment=r.innerText,this.fragShader=this.__createShader();var i=this.canvasCTX.getAttribLocation(this.fragShader,"position");this.canvasCTX.enableVertexAttribArray(i),this.fragTime=this.canvasCTX.getUniformLocation(this.fragShader,"time"),this.canvasCTX.uniform1f(this.fragTime,this.context.currentTime);var s=this.canvasCTX.getUniformLocation(this.fragShader,"resolution");this.canvasCTX.uniform2f(s,this.width,this.height),this.fragSpectrumArray=new Uint8Array(4*this.freqs.length);this.__createTexture()},e.prototype.__createShader=function(){var e=this.canvasCTX.createShader(this.canvasCTX.VERTEX_SHADER);if(this.canvasCTX.shaderSource(e,this.vertex),this.canvasCTX.compileShader(e),!this.canvasCTX.getShaderParameter(e,this.canvasCTX.COMPILE_STATUS))throw new Error(this.canvasCTX.getShaderInfoLog(e));var t=this.canvasCTX.createShader(this.canvasCTX.FRAGMENT_SHADER);if(this.canvasCTX.shaderSource(t,this.fragment),this.canvasCTX.compileShader(t),!this.canvasCTX.getShaderParameter(t,this.canvasCTX.COMPILE_STATUS))throw new Error(this.canvasCTX.getShaderInfoLog(t));var n=this.canvasCTX.createProgram();return this.canvasCTX.attachShader(n,e),this.canvasCTX.attachShader(n,t),this.canvasCTX.linkProgram(n),this.canvasCTX.useProgram(n),n},e.prototype.__createTexture=function(){var e=this.canvasCTX.createTexture();return this.canvasCTX.bindTexture(this.canvasCTX.TEXTURE_2D,e),this.canvasCTX.texParameteri(this.canvasCTX.TEXTURE_2D,this.canvasCTX.TEXTURE_MIN_FILTER,this.canvasCTX.LINEAR),this.canvasCTX.texParameteri(this.canvasCTX.TEXTURE_2D,this.canvasCTX.TEXTURE_WRAP_S,this.canvasCTX.CLAMP_TO_EDGE),this.canvasCTX.texParameteri(this.canvasCTX.TEXTURE_2D,this.canvasCTX.TEXTURE_WRAP_T,this.canvasCTX.CLAMP_TO_EDGE),e},e.prototype.__copyAudioDataToTexture=function(){for(var e=0;e<this.freqs.length;e++)this.fragSpectrumArray[6*e+0]=this.freqs[e],this.fragSpectrumArray[6*e+1]=this.freqs[e],this.fragSpectrumArray[6*e+2]=this.freqs[e],this.fragSpectrumArray[6*e+3]=255;this.canvasCTX.texImage2D(this.canvasCTX.TEXTURE_2D,0,this.canvasCTX.RGBA,this.freqs.length,1,0,this.canvasCTX.RGBA,this.canvasCTX.UNSIGNED_BYTE,this.fragSpectrumArray)},e.prototype.__renderQuad=function(){this.canvasCTX.drawArrays(this.canvasCTX.TRIANGLE_STRIP,0,4)},e}(),A=function(){function e(){}return e.prototype.render=function(){return""},e}();e["WEB-AUDIO"]=p,e["WEB-AUDIO-DEBUGGER"]=d,e["WEB-AUDIO-EFFECT"]=b,e["WEB-AUDIO-SEQUENCER"]=T,e["WEB-AUDIO-SOURCE"]=w,e["WEB-AUDIO-VISUALIZER"]=I,e["WEB-AUDIO-VISUALIZER-SHADER"]=A},["WEB-AUDIO",[["_currentSource",5],["_sources",5],["autoplay",1],["context",5],["element",7],["externalFiles",5],["gain",5],["is_prepared",6],["keys",5],["midi",1],["name",1],["prepared",5],["previousVisualizer",5],["source",6],["sources",5],["visualizerNodes",5],["visualizers",5]],{},0,0,0,1],["WEB-AUDIO-DEBUGGER",[["first",1],["last",1]],{},0,0,0,1],["WEB-AUDIO-EFFECT",[["_use",5],["attachEffect",6],["axis",1],["context",5],["effect",5],["element",7],["method",1],["parent",5],["responds",1],["source",5],["type",1],["use",1],["value",1,2]],{},0,0,0,1],["WEB-AUDIO-SEQUENCER",[["autoplay",1,1],["context",5],["currentTap",5],["custom",1],["iterations",5],["name",1],["noteTime",5],["play",6],["startTime",5],["stop",6],["taps",1,2],["tempo",1,2],["timer",5],["totalPlayTime",5]],{},0,0,0,1],["WEB-AUDIO-SOURCE",[["assignBuffer",6],["buffer",5],["channelGain",5],["context",5],["dryGain",5],["effects",5],["effectsvolume",1,2],["element",7],["entry",5],["gain",6],["getBuffer",6],["inert",1,1],["masterGain",5],["midichannel",1,2],["midikey",1,2],["name",1],["play",6],["source",5],["src",1],["status",5],["webAudio",6],["webAudioWrapper",5],["wetGain",5]],{},0,0,0,1],["WEB-AUDIO-VISUALIZER",[["_bufferLength",5],["_dataArray",5],["analyser",5],["canvas",5],["canvasCTX",5],["connect",6],["context",5],["element",7],["for",1],["fragment",5],["fragShader",5],["fragSpectrumArray",5],["fragTime",5],["freqs",5],["height",5],["renderer",1],["size",1,2],["smoothing",1,2],["times",5],["type",1],["vertex",5],["vertexShader",5],["width",5]],{},0,0,0,1],["WEB-AUDIO-VISUALIZER-SHADER",[["type",1]],{},0,0,0,1]);